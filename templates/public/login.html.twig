<!doctype html>
<html lang="tr" data-bs-theme="blue-theme">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>Yakalamaç Giriş</title>
        <link rel="icon" href="{{ asset('assets/images/yakala/yakalamac-icon.png') }}" type="image/png">
        <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Material+Icons+Outlined" rel="stylesheet">
        <link href="{{ asset('assets/plugins/ajax/toastr/css/toastr.js.toastr.min.css') }}" rel="stylesheet">

        {# importmap('app') #}
        <link rel="stylesheet" href="{{ asset('/assets/css/pace.min.css') }}">
        <script src="{{ asset('/assets/js/pace.min.js') }}"></script>
        <link rel="stylesheet" href="{{ asset('/assets/plugins/perfect-scrollbar/css/perfect-scrollbar.css') }}">
        <link rel="stylesheet" href="{{ asset('/assets/plugins/metismenu/metisMenu.min.css') }}">
        <link rel="stylesheet" href="{{ asset('/assets/plugins/metismenu/mm-vertical.min.css') }}">
        <link rel="stylesheet" href="{{ asset('/assets/plugins/simplebar/css/simplebar.css') }}">
        <link rel="stylesheet" href="{{ asset('/assets/css/extra-icons.min.css') }}">
        <link rel="stylesheet" href="{{ asset('/assets/css/bootstrap.min.css') }}">
        <link rel="stylesheet" href="{{ asset('/assets/css/bootstrap-extended.min.css') }}">
        <link rel="stylesheet" href="{{ asset('/sass/main.min.css') }}">
        <link rel="stylesheet" href="{{ asset('/sass/dark-theme.min.css') }}">
        <link rel="stylesheet" href="{{ asset('/sass/blue-theme.min.css') }}">
        <link rel="stylesheet" href="{{ asset('/sass/semi-dark.min.css') }}">
        <link rel="stylesheet" href="{{ asset('/sass/bordered-theme.css') }}">,
        <link rel="stylesheet" href="{{ asset('/sass/responsive.min.css') }}">
        <link rel="stylesheet" href="{{ asset('styles/public/login.css') }}">

        <script src="https://accounts.google.com/gsi/client" async defer></script>
        <script type="text/javascript" src="https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_US/appleid.auth.js"></script>
    </head>
    <body>
        <div class="section-authentication-cover">
            <div class="">
                <div class="row g-0">
                    <div class="col-12 col-xl-7 col-xxl-8 auth-cover-left align-items-center justify-content-center d-none d-xl-flex border-end bg-transparent">
                        <div class="card rounded-0 mb-0 border-0 shadow-none bg-transparent bg-none">
                            <div class="card-body">
                                <img src="{{ asset('assets/images/auth/login1.png') }}" class="img-fluid auth-img-cover-login" width="650" alt="">
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-xl-5 col-xxl-4 auth-cover-right align-items-center justify-content-center border-top border-4 border-primary border-gradient-1">
                        <div class="card rounded-0 m-3 mb-0 border-0 shadow-none bg-none">
                            <div class="card-body p-sm-5">
                                <img src="{{ asset('assets/images/yakala/logo.png') }}" class="mb-4" width="200" alt="">
                                <p class="mb-0">Hesabınıza giriş yapın</p>
                                <div class="row g-3 my-4">
                                    <div class="form-body mt-4">
                                        <div id="emailLoginForm" class="login-form">
                                            <form method="POST" action="{{ path('app_login') }}" class="row g-3 mb-4">
                                                <input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}">
                                                <div class="col-12">
                                                    <label for="inputEmailAddress" class="form-label">E-Posta Adresi</label>
                                                    <input type="text" class="form-control" id="inputEmailAddress" name="email"
                                                           placeholder="eposta@adresi.com" required autocomplete="username">
                                                </div>
                                                <div class="col-12">
                                                    <label for="inputChoosePassword" class="form-label">Şifre</label>
                                                    <div class="input-group" id="show_hide_password">
                                                        <input type="password" class="form-control" id="inputChoosePassword" name="password"
                                                               placeholder="********" autocomplete="current-password" required>
                                                        <a href="javascript:void(0)" class="input-group-text bg-transparent">
                                                            <i class="bi bi-eye-slash-fill"></i>
                                                        </a>
                                                    </div>
                                                </div>
                                                <div class="col-12">
                                                    <div class="d-grid">
                                                        <button type="submit" class="btn btn-grd-primary">Giriş Yap</button>
                                                    </div>
                                                </div>
                                            </form>
                                            <a class="toggle-link" id="switchToPhoneLogin">Telefon numarası ile giriş yap</a>
                                        </div>

                                        <div id="phoneLoginForm" class="login-form" style="display: none;">
                                            <form class="row g-3 mb-4" style="min-width:55vh">
                                                <div id="phoneStep">
                                                    <div class="col-12 mb-4">
                                                        <label for="inputPhoneNumber" class="form-label">Telefon Numarası</label>
                                                        <input type="text" class="form-control" id="inputPhoneNumber" name="phone" placeholder="5XX XXX XX XX">
                                                    </div>
                                                    <div class="col-12">
                                                        <div class="d-grid">
                                                            <button type="button" class="btn btn-grd-primary" id="sendOtpBtn">Kod Gönder</button>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div id="otpStep" style="display: none;">
                                                    <input type="hidden" name="_csrf_token_phone" value="{{ csrf_token('authenticate') }}">
                                                    <div class="col-12 mb-4">
                                                        <label for="inputOtpCode" class="form-label">SMS Kodu</label>
                                                        <input type="text" class="form-control" id="inputOtpCode" name="otp" placeholder="6 haneli kod" maxlength="6">
                                                    </div>
                                                    <div class="col-12">
                                                        <div class="d-grid">
                                                            <button type="button" class="btn btn-grd-primary" id="loginOtpBtn">Giriş Yap</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </form>
                                            <a class="toggle-link" id="switchToEmailLogin">E-posta ile giriş yap</a>
                                        </div>

                                        <div id="yakalamac-identity-provider-list"
                                             class="row align-items-center justify-content-center mt-3">

                                        </div>
                                        <div>

                                            <!-- Google Identity Services Initialization -->
                                            <div id="g_id_onload"
                                                 data-client_id="901480078814-vll4qqpfnnrapabgkut8d6poqvis12pr.apps.googleusercontent.com"
                                                 data-callback="googleLoginHandler"
                                                 data-auto_prompt="true">
                                            </div>
{#                                            <noscript>#}
{#                                                <div class="alert alert-warning">#}
{#                                                    Google Sign-In requires JavaScript to function. Please enable JavaScript in your browser settings.#}
{#                                                </div>#}
{#                                            </noscript>#}

                                            <!-- Google Sign-In Button -->
                                            <div class="g_id_signin"
                                                 data-type="icon"
                                                 data-shape="pill"
                                                 data-theme="outline"
                                                 data-text="signin_with"
                                                 data-size="large"
                                                 data-logo_alignment="left">
                                            </div>


                                            <div id="appleid-signin" data-color="black" data-border="true" data-type="sign in"></div>

                                        </div>

                                    </div>
                                </div>
                                {% for message in app.flashes('error') %}
                                    <div class="alert alert-danger mt-2">{{ message }}</div>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script src="{{ asset('assets/js/jquery.min.js') }}"></script>
        <script src="{{ asset('assets/js/bootstrap.bundle.min.js') }}" async></script>
        <script src="{{ asset('assets/plugins/ajax/toastr/js/toastr.min.js') }}"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.inputmask/5.0.8/jquery.inputmask.min.js" async defer></script>
        <script>
            window.Twig = {
                _xrf: "{{ csrf_token('authenticate') }}",
                oauthRedirectUri: new URL('/oauth2/callback',document.location.origin).toString()
            };
        </script>
        <script type="module" src="{{ asset('script/public/login.js') }}"></script>

        <script type="text/javascript">
            if(window.hasOwnProperty('AppleID') && typeof window.AppleID === 'object') {
                window.AppleID.auth.init({
                    clientId : 'la.yaka.api.dev',
                    scope : 'name email',
                    redirectURI : window.Twig.oauthRedirectUri,
                    state : '{{ csrf_token('authenticate') }}',
                    nonce : Date.now().toString(),
                    usePopup : true
                });
            }

        </script>
    </body>
</html>
